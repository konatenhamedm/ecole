'use strict';(function(f){function r(b,g){var l={},n={"true":!0,"false":!1,"null":null};f.each(b.replace(/\+/g," ").split("&"),function(d,h){var a=h.split("=");d=decodeURIComponent(a[0]);h=l;var e=0,c=d.split("]["),k=c.length-1;/\[/.test(c[0])&&/\]$/.test(c[k])?(c[k]=c[k].replace(/\]$/,""),c=c.shift().split("[").concat(c),k=c.length-1):k=0;if(2===a.length)if(a=decodeURIComponent(a[1]),g&&(a=a&&!isNaN(a)?+a:"undefined"===a?void 0:void 0!==n[a]?n[a]:a),k)for(;e<=k;e++)d=""===c[e]?h.length:c[e],h=h[d]=
e<k?h[d]||(c[e+1]&&isNaN(c[e+1])?{}:[]):a;else f.isArray(l[d])?l[d].push(a):l[d]=void 0!==l[d]?[l[d],a]:a;else d&&(l[d]=g?void 0:"")});return l}f.fn.initDataTables=function(b,g){f.fn.initDataTables.defaults.url=g&&g.ajaxUrl?g.ajaxUrl:window.location.origin+window.location.pathname;g.language&&delete g.language;g=f.extend(g||{},{responsive:!0,language:{url:asset_base_path+"/js/i18n/French.json"}});var l=this;b=f.extend({},f.fn.initDataTables.defaults,b);var n="";switch(b.state){case "fragment":n=window.location.hash;
break;case "query":n=window.location.search}n=1<n.length?r(n.substr(1)):{};var d="none"===b.state?{}:{stateSave:!0,stateLoadCallback:function(h,a){return null}};return new Promise((h,a)=>{f.ajax("function"===typeof b.url?b.url(null):b.url,{method:b.method,data:{_dt:b.name,_init:!0}}).done(function(e){var c,k=f.extend({},e.options,"function"===typeof b.options?{}:b.options,g,d,{ajax:function(m,q,p){e?(e.draw=m.draw,q(e),e=null,Object.keys(n).length&&(m=new f.fn.dataTable.Api(p),p=f.extend(!0,{},m.state(),
n),m.order(p.order).search(p.search.search).page.len(p.length).page(p.start/p.length).draw(!1))):(m._dt=b.name,f.ajax("function"===typeof b.url?b.url(dt):b.url,{method:b.method,data:m}).done(function(t){q(t)}))}});"function"===typeof b.options&&(k=b.options(k));l.html(e.template);dt=f("table",l).DataTable(k);if("none"!==b.state)dt.on("draw.dt",function(m){m=f.param(dt.state()).split("&");if(c)switch(m=m.filter(q=>-1===c.indexOf(q)&&0!==q.indexOf("time=")),b.state){case "fragment":history.replaceState(null,
null,window.location.origin+window.location.pathname+window.location.search+"#"+decodeURIComponent(m.join("&")));break;case "query":history.replaceState(null,null,window.location.origin+window.location.pathname+"?"+decodeURIComponent(m.join("&")+window.location.hash))}else c=m});h(dt)}).fail(function(e,c,k){console.error("DataTables request failed: "+k);a(c)})})};f.fn.initDataTables.defaults={method:"POST",state:"fragment",url:window.location.origin+window.location.pathname};f.fn.initDataTables.exportBtnAction=
function(b,g){g=f.extend({},f.fn.initDataTables.defaults,g);return function(l,n){l=f.param(f.extend({},n.ajax.params(),{_dt:g.name,_exporter:b}));const d=new XMLHttpRequest;d.open(g.method,"GET"===g.method?g.url+"?"+l:g.url,!0);d.responseType="arraybuffer";d.onload=function(){if(200===this.status){let e="";var h=d.getResponseHeader("Content-Disposition");h&&-1!==h.indexOf("attachment")&&(h=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(h),null!=h&&h[1]&&(e=h[1].replace(/['"]/g,"")));h=d.getResponseHeader("Content-Type");
if("function"===typeof File)try{var a=new File([this.response],e,{type:h})}catch(c){}"undefined"===typeof a&&(a=new Blob([this.response],{type:h}));if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,e);else{const c=window.URL||window.webkitURL,k=c.createObjectURL(a);e?(a=document.createElement("a"),"undefined"===typeof a.download?window.location=k:(a.href=k,a.download=e,document.body.appendChild(a),a.click())):window.location=k;setTimeout(function(){c.revokeObjectURL(k)},
100)}}};d.setRequestHeader("Content-type","application/x-www-form-urlencoded");d.send("POST"===g.method?l:null)}}})(jQuery);