/*
 jQuery Form Plugin
 version: 3.51.0-2014.06.20
 Requires jQuery v1.5 or later
 Copyright (c) 2014 M. Alsup
 Examples and documentation at: http://malsup.com/jquery/form/
 Project repository: https://github.com/malsup/form
 Dual licensed under the MIT and GPL licenses.
 https://github.com/malsup/form#copyright-and-license
*/
'use strict';(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b("undefined"!=typeof jQuery?jQuery:window.Zepto)})(function(b){function T(a){var f=a.data;a.isDefaultPrevented()||(a.preventDefault(),b(a.target).ajaxSubmit(f))}function U(a){var f=a.target,l=b(f);if(!l.is("[type=submit],[type=image]")){f=l.closest("[type=submit]");if(0===f.length)return;f=f[0]}var g=this;g.clk=f;"image"==f.type&&(void 0!==a.offsetX?(g.clk_x=a.offsetX,g.clk_y=a.offsetY):"function"==typeof b.fn.offset?
(l=l.offset(),g.clk_x=a.pageX-l.left,g.clk_y=a.pageY-l.top):(g.clk_x=a.pageX-f.offsetLeft,g.clk_y=a.pageY-f.offsetTop));setTimeout(function(){g.clk=g.clk_x=g.clk_y=null},100)}function w(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}var V=void 0!==b("<input type='file'/>").get(0).files;var Z=void 0!==window.FormData;var W=!!b.fn.prop;
b.fn.attr2=function(){if(!W)return this.attr.apply(this,arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"===typeof a?a:this.attr.apply(this,arguments)};b.fn.ajaxSubmit=function(a){function f(n){n=b.param(n,a.traditional).split("&");var z=n.length,q=[],v;for(v=0;v<z;v++){n[v]=n[v].replace(/\+/g," ");var r=n[v].split("=");q.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])])}return q}function l(n){for(var z=new FormData,q=0;q<n.length;q++)z.append(n[q].name,n[q].value);
if(a.extraData)for(n=f(a.extraData),q=0;q<n.length;q++)n[q]&&z.append(n[q][0],n[q][1]);a.data=null;q=b.extend(!0,{},b.ajaxSettings,a,{contentType:!1,processData:!1,cache:!1,type:p||"POST"});a.uploadProgress&&(q.xhr=function(){var r=b.ajaxSettings.xhr();r.upload&&r.upload.addEventListener("progress",function(u){var E=0,N=u.loaded||u.position,L=u.total;u.lengthComputable&&(E=Math.ceil(N/L*100));a.uploadProgress(u,N,L,E)},!1);return r});q.data=null;var v=q.beforeSend;q.beforeSend=function(r,u){u.data=
a.formData?a.formData:z;v&&v.call(this,r,u)};return b.ajax(q)}function g(n){function z(h){var k=null;try{h.contentWindow&&(k=h.contentWindow.document)}catch(A){w("cannot get iframe.contentWindow document: "+A)}if(k)return k;try{k=h.contentDocument?h.contentDocument:h.document}catch(A){w("cannot get iframe.contentDocument: "+A),k=h.document}return k}function q(){function h(){try{var I=z(F).readyState;w("state = "+I);I&&"uninitialized"==I.toLowerCase()&&setTimeout(h,50)}catch(M){w("Server abort: ",
M," (",M.name,")"),v(2),L&&clearTimeout(L),L=void 0}}var k=d.attr2("target"),A=d.attr2("action"),B=d.attr("enctype")||d.attr("encoding")||"multipart/form-data";r.setAttribute("target",Q);p&&!/post/i.test(p)||r.setAttribute("method","POST");A!=c.url&&r.setAttribute("action",c.url);c.skipEncodingOverride||p&&!/post/i.test(p)||d.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});c.timeout&&(L=setTimeout(function(){N=!0;v(1)},c.timeout));var G=[];try{if(c.extraData)for(var C in c.extraData)c.extraData.hasOwnProperty(C)&&
(b.isPlainObject(c.extraData[C])&&c.extraData[C].hasOwnProperty("name")&&c.extraData[C].hasOwnProperty("value")?G.push(b('<input type="hidden" name="'+c.extraData[C].name+'">').val(c.extraData[C].value).appendTo(r)[0]):G.push(b('<input type="hidden" name="'+C+'">').val(c.extraData[C]).appendTo(r)[0]));c.iframeTarget||J.appendTo("body");F.attachEvent?F.attachEvent("onload",v):F.addEventListener("load",v,!1);setTimeout(h,15);try{r.submit()}catch(I){document.createElement("form").submit.apply(r)}}finally{r.setAttribute("action",
A),r.setAttribute("enctype",B),k?r.setAttribute("target",k):d.removeAttr("target"),b(G).remove()}}function v(h){if(!e.aborted&&!X)if(y=z(F),y||(w("cannot access response document"),h=2),1===h&&e)e.abort("timeout"),H.reject(e,"timeout");else if(2==h&&e)e.abort("server abort"),H.reject(e,"error","server abort");else if(y&&y.location.href!=c.iframeSrc||N){F.detachEvent?F.detachEvent("onload",v):F.removeEventListener("load",v,!1);h="success";var k;try{if(N)throw"timeout";var A="xml"==c.dataType||y.XMLDocument||
b.isXMLDoc(y);w("isXml="+A);if(!A&&window.opera&&(null===y.body||!y.body.innerHTML)&&--aa){w("requeing onLoad callback, DOM not available");setTimeout(v,250);return}var B=y.body?y.body:y.documentElement;e.responseText=B?B.innerHTML:null;e.responseXML=y.XMLDocument?y.XMLDocument:y;A&&(c.dataType="xml");e.getResponseHeader=function(O){return{"content-type":c.dataType}[O.toLowerCase()]};B&&(e.status=Number(B.getAttribute("status"))||e.status,e.statusText=B.getAttribute("statusText")||e.statusText);var G=
(c.dataType||"").toLowerCase(),C=/(json|script|text)/.test(G);if(C||c.textarea){var I=y.getElementsByTagName("textarea")[0];if(I)e.responseText=I.value,e.status=Number(I.getAttribute("status"))||e.status,e.statusText=I.getAttribute("statusText")||e.statusText;else if(C){var M=y.getElementsByTagName("pre")[0],R=y.getElementsByTagName("body")[0];M?e.responseText=M.textContent?M.textContent:M.innerText:R&&(e.responseText=R.textContent?R.textContent:R.innerText)}}else"xml"==G&&!e.responseXML&&e.responseText&&
(e.responseXML=ba(e.responseText));try{Y=ca(e,G,c)}catch(O){h="parsererror",e.error=k=O||h}}catch(O){w("error caught: ",O),h="error",e.error=k=O||h}e.aborted&&(w("upload aborted"),h=null);e.status&&(h=200<=e.status&&300>e.status||304===e.status?"success":"error");"success"===h?(c.success&&c.success.call(c.context,Y,"success",e),H.resolve(e.responseText,"success",e),E&&b.event.trigger("ajaxSuccess",[e,c])):h&&(void 0===k&&(k=e.statusText),c.error&&c.error.call(c.context,e,h,k),H.reject(e,"error",k),
E&&b.event.trigger("ajaxError",[e,c,k]));E&&b.event.trigger("ajaxComplete",[e,c]);E&&!--b.active&&b.event.trigger("ajaxStop");c.complete&&c.complete.call(c.context,e,h);X=!0;c.timeout&&clearTimeout(L);setTimeout(function(){c.iframeTarget?J.attr("src",c.iframeSrc):J.remove();e.responseXML=null},100)}}var r=d[0],u,E,N,L,H=b.Deferred();H.abort=function(h){e.abort(h)};if(n)for(u=0;u<K.length;u++)n=b(K[u]),W?n.prop("disabled",!1):n.removeAttr("disabled");var c=b.extend(!0,{},b.ajaxSettings,a);c.context=
c.context||c;var Q="jqFormIO"+(new Date).getTime();if(c.iframeTarget){var J=b(c.iframeTarget);(u=J.attr2("name"))?Q=u:J.attr2("name",Q)}else J=b('<iframe name="'+Q+'" src="'+c.iframeSrc+'" />'),J.css({position:"absolute",top:"-1000px",left:"-1000px"});var F=J[0];var e={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(h){var k="timeout"===h?"timeout":"aborted";w("aborting upload... "+
k);this.aborted=1;try{F.contentWindow.document.execCommand&&F.contentWindow.document.execCommand("Stop")}catch(A){}J.attr("src",c.iframeSrc);e.error=k;c.error&&c.error.call(c.context,e,k,h);E&&b.event.trigger("ajaxError",[e,c,k]);c.complete&&c.complete.call(c.context,e,k)}};(E=c.global)&&0===b.active++&&b.event.trigger("ajaxStart");E&&b.event.trigger("ajaxSend",[e,c]);if(c.beforeSend&&!1===c.beforeSend.call(c.context,e,c))return c.global&&b.active--,H.reject(),H;if(e.aborted)return H.reject(),H;(n=
r.clk)&&(u=n.name)&&!n.disabled&&(c.extraData=c.extraData||{},c.extraData[u]=n.value,"image"==n.type&&(c.extraData[u+".x"]=r.clk_x,c.extraData[u+".y"]=r.clk_y));n=b("meta[name=csrf-token]").attr("content");(u=b("meta[name=csrf-param]").attr("content"))&&n&&(c.extraData=c.extraData||{},c.extraData[u]=n);c.forceSync?q():setTimeout(q,10);var Y,y,aa=50,X,ba=b.parseXML||function(h,k){window.ActiveXObject?(k=new ActiveXObject("Microsoft.XMLDOM"),k.async="false",k.loadXML(h)):k=(new DOMParser).parseFromString(h,
"text/xml");return k&&k.documentElement&&"parsererror"!=k.documentElement.nodeName?k:null},da=b.parseJSON||function(h){return window.eval("("+h+")")},ca=function(h,k,A){var B=h.getResponseHeader("content-type")||"",G="xml"===k||!k&&0<=B.indexOf("xml");h=G?h.responseXML:h.responseText;G&&"parsererror"===h.documentElement.nodeName&&b.error&&b.error("parsererror");A&&A.dataFilter&&(h=A.dataFilter(h,k));"string"===typeof h&&("json"===k||!k&&0<=B.indexOf("json")?h=da(h):("script"===k||!k&&0<=B.indexOf("javascript"))&&
b.globalEval(h));return h};return H}if(!this.length)return w("ajaxSubmit: skipping submit process - no element selected"),this;var d=this;"function"==typeof a?a={success:a}:void 0===a&&(a={});var p=a.type||this.attr2("method");var m=a.url||this.attr2("action");console.log(p);(m=(m="string"===typeof m?b.trim(m):"")||window.location.href||"")&&(m=(m.match(/^([^#]+)/)||[])[1]);a=b.extend(!0,{url:m,success:b.ajaxSettings.success,type:p||b.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||
"")?"javascript:false":"about:blank"},a);m={};this.trigger("form-pre-serialize",[this,a,m]);if(m.veto)return w("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return w("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var D=a.traditional;void 0===D&&(D=b.ajaxSettings.traditional);var K=[],t=this.formToArray(a.semantic,K);if(a.data){a.extraData=a.data;var x=b.param(a.data,D)}if(a.beforeSubmit&&!1===a.beforeSubmit(t,
this,a))return w("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[t,this,a,m]);if(m.veto)return w("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;m=b.param(t,D);x&&(m=m?m+"&"+x:x);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+m,a.data=null):(console.log(m),a.data=m);var P=[];a.resetForm&&P.push(function(){d.resetForm()});a.clearForm&&P.push(function(){d.clearForm(a.includeHidden)});if(!a.dataType&&a.target){var ea=
a.success||function(){};P.push(function(n){var z=a.replaceTarget?"replaceWith":"html";b(a.target)[z](n).each(ea,arguments)})}else a.success&&P.push(a.success);a.success=function(n,z,q){for(var v=a.context||this,r=0,u=P.length;r<u;r++)P[r].apply(v,[n,z,q||d,d])};if(a.error){var fa=a.error;a.error=function(n,z,q){fa.apply(a.context||this,[n,z,q,d])}}if(a.complete){var ha=a.complete;a.complete=function(n,z){ha.apply(a.context||this,[n,z,d])}}console.log(a);x=0<b("input[type=file]:enabled",this).filter(function(){return""!==
b(this).val()}).length;m="multipart/form-data"==d.attr("enctype")||"multipart/form-data"==d.attr("encoding");D=V&&Z;w("fileAPI :"+D);var S;!1!==a.iframe&&(a.iframe||(x||m)&&!D)?a.closeKeepAlive?b.get(a.closeKeepAlive,function(){S=g(t)}):S=g(t):S=(x||m)&&D?l(t):b.ajax(a);d.removeData("jqxhr").data("jqxhr",S);for(x=0;x<K.length;x++)K[x]=null;this.trigger("form-submit-notify",[this,a]);return this};b.fn.ajaxForm=function(a){a=a||{};a.delegation=a.delegation&&b.isFunction(b.fn.on);if(!a.delegation&&0===
this.length){var f=this.selector,l=this.context;if(!b.isReady&&f)return w("DOM not ready, queuing ajaxForm"),b(function(){b(f,l).ajaxForm(a)}),this;w("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));return this}return a.delegation?(b(document).off("submit.form-plugin",this.selector,T).off("click.form-plugin",this.selector,U).on("submit.form-plugin",this.selector,a,T).on("click.form-plugin",this.selector,a,U),this):this.ajaxFormUnbind().on("submit.form-plugin",a,T).on("click.form-plugin",
a,U)};b.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a,f){var l=[];if(0===this.length)return l;var g=this[0],d=this.attr("id"),p=a?g.getElementsByTagName("*"):g.elements;p&&!/MSIE [678]/.test(navigator.userAgent)&&(p=b(p).get());d&&(d=b(':input[form="'+d+'"]').get(),d.length&&(p=(p||[]).concat(d)));if(!p||!p.length)return l;var m,D;var K=0;for(D=p.length;K<D;K++){var t=p[K];if((d=t.name)&&!t.disabled)if(a&&g.clk&&"image"==t.type)g.clk==
t&&(l.push({name:d,value:b(t).val(),type:t.type}),l.push({name:d+".x",value:g.clk_x},{name:d+".y",value:g.clk_y}));else if((m=b.fieldValue(t,!0))&&m.constructor==Array){f&&f.push(t);var x=0;for(t=m.length;x<t;x++)l.push({name:d,value:m[x]})}else if(V&&"file"==t.type)if(f&&f.push(t),m=t.files,m.length)for(x=0;x<m.length;x++)l.push({name:d,value:m[x],type:t.type});else l.push({name:d,value:"",type:t.type});else null!==m&&"undefined"!=typeof m&&(f&&f.push(t),l.push({name:d,value:m,type:t.type,required:t.required}))}!a&&
g.clk&&(a=b(g.clk),f=a[0],(d=f.name)&&!f.disabled&&"image"==f.type&&(l.push({name:d,value:a.val()}),l.push({name:d+".x",value:g.clk_x},{name:d+".y",value:g.clk_y})));return l};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};b.fn.fieldSerialize=function(a){var f=[];this.each(function(){var l=this.name;if(l){var g=b.fieldValue(this,a);if(g&&g.constructor==Array)for(var d=0,p=g.length;d<p;d++)f.push({name:l,value:g[d]});else null!==g&&"undefined"!=typeof g&&f.push({name:this.name,
value:g})}});return b.param(f)};b.fn.fieldValue=function(a){for(var f=[],l=0,g=this.length;l<g;l++){var d=b.fieldValue(this[l],a);null===d||"undefined"==typeof d||d.constructor==Array&&!d.length||(d.constructor==Array?b.merge(f,d):f.push(d))}return f};b.fieldValue=function(a,f){var l=a.name,g=a.type,d=a.tagName.toLowerCase();void 0===f&&(f=!0);if(f&&(!l||a.disabled||"reset"==g||"button"==g||("checkbox"==g||"radio"==g)&&!a.checked||("submit"==g||"image"==g)&&a.form&&a.form.clk!=a||"select"==d&&-1==
a.selectedIndex))return null;if("select"==d){d=a.selectedIndex;if(0>d)return null;f=[];a=a.options;l=(g="select-one"==g)?d+1:a.length;for(d=g?d:0;d<l;d++){var p=a[d];if(p.selected){var m=p.value;m||(m=p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value);if(g)return m;f.push(m)}}return f}return b(a).val()};b.fn.clearForm=function(a){return this.each(function(){b("input,select,textarea",this).clearFields(a)})};b.fn.clearFields=b.fn.clearInputs=function(a){var f=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;
return this.each(function(){var l=this.type,g=this.tagName.toLowerCase();f.test(l)||"textarea"==g?this.value="":"checkbox"==l||"radio"==l?this.checked=!1:"select"==g?this.selectedIndex=-1:"file"==l?/MSIE/.test(navigator.userAgent)?b(this).replaceWith(b(this).clone(!0)):b(this).val(""):a&&(!0===a&&/hidden/.test(l)||"string"==typeof a&&b(this).is(a))&&(this.value="")})};b.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&
this.reset()})};b.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};b.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var f=this.type;"checkbox"==f||"radio"==f?this.checked=a:"option"==this.tagName.toLowerCase()&&(f=b(this).parent("select"),a&&f[0]&&"select-one"==f[0].type&&f.find("option").selected(!1),this.selected=a)})};b.fn.ajaxSubmit.debug=!1});